# MySmartHome — МКНome

Учебный проект: итерационная разработка системы управления "умным домом" на C# (.NET 8.0).

## О проекте

Это учебный проект, основанный на сценарии разработки модуля **МКНome** — локальной симуляции умного дома для экосистемы жилых комплексов.

### Концепция

Проект стартует с **базового прототипа** системы умного дома от "тимлида". Прототип содержит:
- ✅ Архитектуру событийного взаимодействия
- ✅ Центральный контроллер как источник событий
- ✅ Интерфейс `ISmartDevice` для всех устройств
- ✅ Эталонную реализацию кондиционера

**Задача** — последовательно дорабатывать систему согласно заданиям из папки `Tasks/`, реализуя недостающую функциональность, исправляя ошибки и улучшая архитектуру.

### Идея итераций

Проект развивается через **итерации**. Каждая итерация — это:
1. **Задание** (файл в `Tasks/`) с требованиями к реализации
2. **Разработка** — реализация требований в коде
3. **Code review** — получение комментариев
4. **Исправления** — доработка по комментариям

Между итерациями структура реализации может **существенно меняться** — это нормально и является частью процесса обучения рефакторингу и архитектурным решениям.

### Назначение проекта

Код готовится для использования в двух направлениях:
- **Симулятор поведения** устройств для автотестов и QA
- **Учебно-демонстрационный модуль** для разработчиков, подключающих реальное оборудование

Далее на базе этого модуля будут разрабатываться сетевой слой, сценарии автоматизации и визуальный интерфейс.

## Общая архитектура

### Ключевые компоненты

**SmartHomeController** — центральный контроллер:
- Генерирует события (температура, время суток, движение)
- Регистрирует устройства
- Обеспечивает ручное управление
- Ведет журнал событий

**ISmartDevice** — интерфейс для всех устройств:
```csharp
void HandleEvent(string eventType, object eventData);
void Configure(Dictionary<string, object> settings);
void ExecuteCommand(string command);
```

**Устройства** (Light, AirConditioner, Heater, ...):
- Подписываются на события контроллера
- Реагируют автоматически на события
- Управляются вручную через команды
- Имеют настраиваемые параметры

**EventLogger** — журналирование:
- Записывает все события с временными метками
- Фиксирует действия устройств и ошибки

### Принцип работы

Система построена на **событийно-ориентированной архитектуре**:

1. Контроллер генерирует событие (например, изменение температуры)
2. Событие через делегат передается всем подписанным устройствам
3. Каждое устройство обрабатывает событие независимо
4. Все действия логируются

События:
- `event Action<string> OnDayTimeChanged` — смена времени суток
- `event Action<int> OnTemperatureChanged` — изменение температуры
- `event Action OnMotionDetected` — обнаружение движения

## Технологии

- **Язык**: C# 10
- **Платформа**: .NET 8.0
- **Архитектура**: событийно-ориентированная с использованием делегатов и интерфейсов
- **Зависимости**: нет внешних библиотек

## Изучаемые концепции

- ✅ **События и делегаты** (`event`, `Action`, `Func`)
- ✅ **Интерфейсы и полиморфизм**
- ✅ **Событийно-ориентированная архитектура**
- ✅ **Лямбда-выражения и замыкания (closures)**
- ✅ **SOLID принципы**
- ✅ **Групповые вызовы делегатов (multicast)**
- ✅ **Обработка ошибок и валидация входных данных**
- ✅ **Логирование событий**

## Структура репозитория

```
MySmartHome/
├── Tasks/              # Задания на каждую итерацию
├── Demo/               # Эталонный exe-файл для тестирования
├── Devices/            # Устройства (структура зависит от итерации)
├── Program.cs          # Точка входа (задан в задании)
└── ...                 # Другие файлы (зависят от итерации)
```

### Ветки Git

- **`origin`** — исходный прототип без изменений (базовая версия)
- **`main`** — рабочая ветка с итерациями, доработками и исправлениями

История коммитов в `main`:
- "N итерация: [описание]"
- "Исправления по комментариям: [что исправлено]"

## Запуск проекта

### Требования
- .NET 8.0 SDK или выше

### Компиляция и запуск

```bash
# Сборка проекта
dotnet build

# Запуск
dotnet run
```

### Эталонный пример

В папке `Demo/` находится эталонная версия для исследования ожидаемого поведения:

```bash
cd Demo
./MySmartHome.exe  # Windows
```
